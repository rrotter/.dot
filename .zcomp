## fpath ##
if type brew &>/dev/null; then
  fpath+=$(brew --prefix)/share/zsh/site-functions
fi

## compinit ##
autoload -Uz compinit
compinit

## tweaks after initialization ##

# ignore rarely used commands that conflict w/ common commands
function () {
  local _ignore=''
  if [[ `uname -o` = Darwin ]]; then
    # kerberos
    _ignore=${_ignore}'|kadmin*|kcc|kdcsetup|kdestroy|kgetcred|kinit|klist|kpasswd|krb*|ktutil|kswitch'
    # kext
    _ignore=${_ignore}'|kcditto|kext*|klist_cdhashes|kmutil'
    # java
    _ignore=${_ignore}'|keytool'
  fi
  if type brew &>/dev/null; then
    # gnucoreutils - disable autocompletion of every g* prefixed command; regen this list with:
    #   echo $(brew ls coreutils libtool glib | grep '/bin/g' | sed 's/.*bin\///' | sort) | sed 's/ /|/g' | sed 's/\[/\\\[/g'
    _ignore=${_ignore}'|g\[|gb2sum|gbase32|gbase64|gbasename|gbasenc|gcat|gchcon|gchgrp|gchmod|gchown|gchroot|gcksum|gcomm|gcp|gcsplit|gcut|gdate|gdbus|gdbus-codegen|gdd|gdf|gdir|gdircolors|gdirname|gdu|gecho|genv|gexpand|gexpr|gfactor|gfalse|gfmt|gfold|ggroups|ghead|ghostid|gid|ginstall|gio|gio-querymodules|gjoin|gkill|glib-compile-resources|glib-compile-schemas|glib-genmarshal|glib-gettextize|glib-mkenums|glibtool|glibtoolize|glink|gln|glogname|gls|gmd5sum|gmkdir|gmkfifo|gmknod|gmktemp|gmv|gnice|gnl|gnohup|gnproc|gnumfmt|gobject-query|god|gpaste|gpathchk|gpinky|gpr|gprintenv|gprintf|gptx|gpwd|greadlink|grealpath|gresource|grm|grmdir|gruncon|gseq|gsettings|gsha1sum|gsha224sum|gsha256sum|gsha384sum|gsha512sum|gshred|gshuf|gsleep|gsort|gsplit|gstat|gstdbuf|gstty|gsum|gsync|gtac|gtail|gtee|gtest|gtester|gtester-report|gtimeout|gtouch|gtr|gtrue|gtruncate|gtsort|gtty|guname|gunexpand|guniq|gunlink|guptime|gusers|gvdir|gwc|gwho|gwhoami|gyes'
  fi

  zstyle ':completion:*:*:-command-:*:*' ignored-patterns $_ignore
}

# git cherry-pick > git cherry
zstyle ':completion::complete:git:*:*' ignored-patterns 'cherry'
